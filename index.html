<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Happy Hours</title>
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://boulderhappyhour.vercel.app/">
    <meta property="og:title" content="Boulder Happy Hours">
    <meta property="og:description" content="Find the best happy hour deals in Boulder County - food specials, drink deals, and late night offers">
    <meta property="og:image" content="https://boulderhappyhour.vercel.app/images/boulderhappyhour.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://boulderhappyhour.vercel.app/">
    <meta name="twitter:title" content="Boulder Happy Hours">
    <meta name="twitter:description" content="Find the best happy hour deals in Boulder County - food specials, drink deals, and late night offers">
    <meta name="twitter:image" content="https://boulderhappyhour.vercel.app/images/boulderhappyhour.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        fadeIn: 'fadeIn 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translate(-50%, -20px)' },
                            '100%': { opacity: '1', transform: 'translate(-50%, 0)' }
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-orange-50 to-amber-50 min-h-screen">
    <div id="root"></div>
    
    <script type="module">
        const React = await import('https://esm.sh/react@18.2.0');
        const ReactDOM = await import('https://esm.sh/react-dom@18.2.0/client');
        
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        const SHEET_ID = '1fOO4xaEGOmRbL1IYHl0YbU2acWxoksjfaJBm9uf4rp4';
        const SHEET_CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=0`;
        
        const DAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const result = [];
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                
                const values = [];
                let current = '';
                let inQuotes = false;
                
                for (let char of line) {
                    if (char === '"') {
                        inQuotes = !inQuotes;
                    } else if (char === ',' && !inQuotes) {
                        values.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                values.push(current.trim());
                
                if (values[0]) {
                    const deal = {
                        venue: values[0],
                        city: values[1] || '',
                        day: values[2] || '',
                        deal_type: values[3] || '',
                        time: values[4] || '',
                        deal_description: values[5] || '',
                        beer: (values[6] || '').toLowerCase().trim() === 'x',
                        wine: (values[7] || '').toLowerCase().trim() === 'x',
                        cocktail: (values[8] || '').toLowerCase().trim() === 'x',
                        margarita: (values[9] || '').toLowerCase().trim() === 'x',
                        nobo: (values[10] || '').toLowerCase().trim() === 'x',
                        sobo: (values[11] || '').toLowerCase().trim() === 'x',
                        dotobo: (values[12] || '').toLowerCase().trim() === 'x',
                        lesbo: (values[13] || '').toLowerCase().trim() === 'x',
                        thehill: (values[14] || '').toLowerCase().trim() === 'x',
                        ctpatown: (values[15] || '').toLowerCase().trim() === 'x',
                        latenight: (values[16] || '').toLowerCase().trim() === 'x',
                        taco_tuesday: (values[17] || '').toLowerCase().trim() === 'x',
                        url: (values[18] || '').trim()
                    };
                    
                    // Debug log for drinks with margarita tag
                    if (deal.margarita) {
                        console.log('Margarita deal found:', deal);
                    }
                    
                    result.push(deal);
                }
            }
            
            console.log('Total deals parsed:', result.length);
            console.log('All deals:', result);
            
            return result;
        }
        
        function App() {
            const [deals, setDeals] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            
            // Filters
            const [selectedDay, setSelectedDay] = useState('');
            const [dealType, setDealType] = useState('all');
            const [drinkFilter, setDrinkFilter] = useState('all');
            const [lateNightOnly, setLateNightOnly] = useState(false);
            const [showStickyFilters, setShowStickyFilters] = useState(false);
            
            // Get current day
            useEffect(() => {
                const today = new Date().getDay();
                setSelectedDay(DAYS[today]);
                
                // Scroll to top on page load/refresh
                window.scrollTo(0, 0);
            }, []);
            
            // Detect scroll to show/hide sticky filters
            useEffect(() => {
                const handleScroll = () => {
                    // Show sticky filters after scrolling down 300px
                    setShowStickyFilters(window.scrollY > 300);
                };
                
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            
            // Scroll to deals section when filters change (if sticky menu is visible)
            useEffect(() => {
                if (showStickyFilters) {
                    const dealsSection = document.getElementById('deals-section');
                    if (dealsSection) {
                        const yOffset = -140; // Offset for sticky menu height + spacing
                        const y = dealsSection.getBoundingClientRect().top + window.pageYOffset + yOffset;
                        window.scrollTo({ top: y, behavior: 'smooth' });
                    }
                }
            }, [selectedDay, dealType, drinkFilter, lateNightOnly]);
            
            // Fetch data
            useEffect(() => {
                async function fetchDeals() {
                    try {
                        const response = await fetch(SHEET_CSV_URL);
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const csvText = await response.text();
                        const parsedDeals = parseCSV(csvText);
                        
                        setDeals(parsedDeals);
                        setLoading(false);
                    } catch (err) {
                        console.error('Error fetching deals:', err);
                        setError('Failed to load deals. Please refresh the page.');
                        setLoading(false);
                    }
                }
                
                fetchDeals();
            }, []);
            
            // Filter deals
            const filteredDeals = deals.filter(deal => {
                const dealDay = deal.day.toLowerCase();
                const isWeekday = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'].includes(selectedDay.toLowerCase());
                const isWeekend = ['saturday', 'sunday'].includes(selectedDay.toLowerCase());
                
                // Handle different day types
                const matchesDay = 
                    deal.day === selectedDay || // Exact match
                    dealDay === 'daily' || // Daily deals show every day
                    (dealDay === 'weekdays' && isWeekday) || // Weekdays deals show Mon-Fri only
                    (dealDay === 'weekends' && isWeekend); // Weekends deals show Sat-Sun only
                
                // Day filter ALWAYS applies first
                if (!matchesDay) return false;
                
                // Deal type filter
                if (dealType !== 'all' && deal.deal_type !== dealType) return false;
                
                // Late Night filter - now works WITH day filter, not instead of it
                if (lateNightOnly) {
                    const timeStr = deal.time || '';
                    
                    // Check if this is a PM time by looking for "pm" in the string
                    const hasPM = timeStr.toLowerCase().includes('pm');
                    const hasAM = timeStr.toLowerCase().includes('am');
                    
                    // If it has AM only (no PM), it's definitely not late night
                    if (hasAM && !hasPM) {
                        return false;
                    }
                    
                    // If no PM indicator, not late night
                    if (!hasPM) {
                        return false;
                    }
                    
                    // Match time patterns - improved regex to capture AM/PM for each time
                    const timeMatch = timeStr.match(/(\d+)(?::(\d+))?\s*(am|pm|AM|PM)?[\s\-â€“to]+(\d+)?(?::(\d+))?\s*(am|pm|AM|PM)?/i);
                    
                    if (timeMatch) {
                        let startHour = parseInt(timeMatch[1]);
                        let startMin = timeMatch[2] ? parseInt(timeMatch[2]) : 0;
                        const startPeriod = timeMatch[3] ? timeMatch[3].toLowerCase() : null;
                        const endHour = timeMatch[4] ? parseInt(timeMatch[4]) : null;
                        const endMin = timeMatch[5] ? parseInt(timeMatch[5]) : 0;
                        const endPeriod = timeMatch[6] ? timeMatch[6].toLowerCase() : null;
                        
                        // Convert start time to 24-hour format
                        if (startPeriod === 'pm' && startHour !== 12) {
                            startHour += 12;
                        } else if (startPeriod === 'am' && startHour === 12) {
                            startHour = 0;
                        }
                        
                        // If start time has AM, it's not late night
                        if (startPeriod === 'am') {
                            return false;
                        }
                        
                        // Convert end time to 24-hour format
                        let endHour24 = endHour;
                        if (endHour24) {
                            if (endPeriod === 'pm' && endHour24 !== 12) {
                                endHour24 += 12;
                            } else if (endPeriod === 'am' && endHour24 === 12) {
                                endHour24 = 0;
                            }
                        }
                        
                        // Check if deal runs during late night hours (at or after 8:00pm = 20:00)
                        // BUT exclude deals that END at exactly 8:00pm
                        const startTime = startHour * 60 + startMin; // Convert to minutes
                        const lateNightStart = 20 * 60; // 8:00pm in minutes
                        
                        const startsLateNight = startTime >= lateNightStart;
                        
                        let endsLateNight = false;
                        if (endHour24) {
                            const endTime = endHour24 * 60 + endMin;
                            // Must end AFTER 8:00pm, not AT 8:00pm
                            endsLateNight = endTime > lateNightStart;
                        }
                        
                        if (!startsLateNight && !endsLateNight) {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
                
                // Drink type filter
                if (dealType === 'Drink' && drinkFilter !== 'all') {
                    if (drinkFilter === 'beer' && !deal.beer) return false;
                    if (drinkFilter === 'wine' && !deal.wine) return false;
                    if (drinkFilter === 'cocktail' && !deal.cocktail) return false;
                    if (drinkFilter === 'margarita' && !deal.margarita) return false;
                }
                
                return true;
            });
            
            // Group deals by venue when in "All" view
            let displayDeals;
            if (dealType === 'all') {
                // Group by venue + city
                const venueMap = new Map();
                filteredDeals.forEach(deal => {
                    const key = `${deal.venue}|${deal.city}`;
                    if (!venueMap.has(key)) {
                        venueMap.set(key, {
                            venue: deal.venue,
                            city: deal.city,
                            deals: []
                        });
                    }
                    venueMap.get(key).deals.push(deal);
                });
                displayDeals = Array.from(venueMap.values());
            } else {
                // Group by venue + city for Food/Drink view too (same as All view)
                const venueMap = new Map();
                filteredDeals.forEach(deal => {
                    const key = `${deal.venue}|${deal.city}`;
                    if (!venueMap.has(key)) {
                        venueMap.set(key, {
                            venue: deal.venue,
                            city: deal.city,
                            deals: []
                        });
                    }
                    venueMap.get(key).deals.push(deal);
                });
                displayDeals = Array.from(venueMap.values());
            }
            
            // Sort deals within each venue by time
            displayDeals.forEach(venueGroup => {
                venueGroup.deals.sort((a, b) => {
                    const getStartTime = (timeStr) => {
                        if (!timeStr) return 9999; // Put items without time at end
                        
                        // Match hour and AM/PM
                        const match = timeStr.match(/(\d+)(?::(\d+))?\s*(am|pm|AM|PM)?/);
                        if (!match) return 9999;
                        
                        let hour = parseInt(match[1]);
                        const minutes = match[2] ? parseInt(match[2]) : 0;
                        const period = match[3] ? match[3].toLowerCase() : 'pm'; // Default to PM if not specified
                        
                        // Convert to 24-hour format
                        if (period === 'pm' && hour !== 12) {
                            hour += 12;
                        } else if (period === 'am' && hour === 12) {
                            hour = 0;
                        }
                        
                        return hour * 60 + minutes; // Return total minutes for sorting
                    };
                    return getStartTime(a.time) - getStartTime(b.time);
                });
            });
            
            // Sort venues by earliest deal time
            const sortedDisplayDeals = displayDeals.sort((a, b) => {
                const getStartTime = (timeStr) => {
                    if (!timeStr) return 9999;
                    
                    const match = timeStr.match(/(\d+)(?::(\d+))?\s*(am|pm|AM|PM)?/);
                    if (!match) return 9999;
                    
                    let hour = parseInt(match[1]);
                    const minutes = match[2] ? parseInt(match[2]) : 0;
                    const period = match[3] ? match[3].toLowerCase() : 'pm';
                    
                    if (period === 'pm' && hour !== 12) {
                        hour += 12;
                    } else if (period === 'am' && hour === 12) {
                        hour = 0;
                    }
                    
                    return hour * 60 + minutes;
                };
                const aTime = a.deals.length > 0 ? getStartTime(a.deals[0].time) : 9999;
                const bTime = b.deals.length > 0 ? getStartTime(b.deals[0].time) : 9999;
                return aTime - bTime;
            });
            
            if (loading) {
                return React.createElement('div', { className: 'flex items-center justify-center min-h-screen' },
                    React.createElement('div', { className: 'text-xl text-gray-600' }, 'Loading happy hours...')
                );
            }
            
            if (error) {
                return React.createElement('div', { className: 'flex items-center justify-center min-h-screen' },
                    React.createElement('div', { className: 'text-xl text-red-600' }, error)
                );
            }
            
            return React.createElement('div', { 
                className: 'min-h-screen', 
                style: { background: 'linear-gradient(to bottom, #628141, #4a6130)' }
            },
                React.createElement('div', { className: 'container mx-auto px-4 py-8 max-w-6xl' },
                // Sticky Floating Glass Filter Menu (appears on scroll)
                showStickyFilters && React.createElement('div', { 
                    className: 'fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-5xl px-4 animate-fadeIn'
                },
                    React.createElement('div', { 
                        className: 'bg-white/70 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 p-4'
                    },
                        // Day buttons - full names on desktop/tablet, abbreviated on mobile
                        React.createElement('div', { className: 'flex flex-wrap gap-1.5 justify-center mb-2' },
                            ...DAYS.map(day =>
                                React.createElement('button', {
                                    key: day,
                                    onClick: () => setSelectedDay(day),
                                    className: `px-2 py-1.5 md:px-4 md:py-2 rounded-lg text-sm md:text-base font-medium transition-all backdrop-blur-md border ${
                                        selectedDay === day
                                            ? 'bg-white/80 text-slate-900 shadow-lg border-white/60 scale-105'
                                            : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                    }`
                                }, 
                                    // Show abbreviated on mobile, full on desktop
                                    React.createElement('span', { className: 'md:hidden' }, day.substring(0, 3)),
                                    React.createElement('span', { className: 'hidden md:inline' }, day)
                                )
                            ),
                            // Late Night
                            React.createElement('button', {
                                onClick: () => setLateNightOnly(!lateNightOnly),
                                className: `px-3 py-1.5 md:px-6 md:py-2 rounded-lg text-sm md:text-base font-medium transition-all relative overflow-hidden ${
                                    lateNightOnly 
                                        ? 'bg-gradient-to-r from-indigo-900 to-purple-900 text-white shadow-lg' 
                                        : 'bg-gray-800 text-gray-300 hover:from-indigo-800 hover:to-purple-800 hover:text-white'
                                }`,
                                style: lateNightOnly ? {
                                    backgroundImage: `
                                        radial-gradient(circle at 20% 30%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                        radial-gradient(circle at 60% 70%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                        radial-gradient(circle at 30% 80%, rgba(255,255,255,0.55) 1px, transparent 1px),
                                        radial-gradient(circle at 90% 60%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                        radial-gradient(circle at 15% 50%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                        radial-gradient(circle at 45% 15%, rgba(255,255,255,0.5) 1px, transparent 1px),
                                        radial-gradient(circle at 70% 45%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                        linear-gradient(to right, rgb(49, 46, 129), rgb(88, 28, 135))
                                    `,
                                    backgroundSize: '100% 100%'
                                } : {
                                    backgroundImage: `
                                        radial-gradient(circle at 20% 30%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                        radial-gradient(circle at 60% 70%, rgba(255,255,255,0.38) 1px, transparent 1px),
                                        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                        radial-gradient(circle at 30% 80%, rgba(255,255,255,0.36) 1px, transparent 1px),
                                        radial-gradient(circle at 90% 60%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                        radial-gradient(circle at 15% 50%, rgba(255,255,255,0.4) 1px, transparent 1px),
                                        radial-gradient(circle at 45% 15%, rgba(255,255,255,0.35) 1px, transparent 1px),
                                        radial-gradient(circle at 70% 45%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                        linear-gradient(to right, rgb(31, 41, 55), rgb(17, 24, 39))
                                    `,
                                    backgroundSize: '100% 100%'
                                }
                            }, 'ðŸŒ› Late Night'),
                            // Deal type buttons - mobile only (inline after Late Night)
                            React.createElement('button', {
                                onClick: () => { setDealType('all'); setDrinkFilter('all'); },
                                className: `md:hidden px-3 py-1.5 rounded-lg text-sm font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'all' 
                                        ? 'bg-gradient-to-br from-purple-500 via-purple-600 to-purple-800 text-white shadow-lg border-purple-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'All'),
                            React.createElement('button', {
                                onClick: () => { setDealType('Food'); setDrinkFilter('all'); },
                                className: `md:hidden px-3 py-1.5 rounded-lg text-sm font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'Food' 
                                        ? 'bg-gradient-to-br from-green-500 via-green-600 to-green-800 text-white shadow-lg border-green-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'ðŸ•'),
                            React.createElement('button', {
                                onClick: () => setDealType('Drink'),
                                className: `md:hidden px-3 py-1.5 rounded-lg text-sm font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'Drink' 
                                        ? 'bg-gradient-to-br from-blue-500 via-blue-600 to-blue-800 text-white shadow-lg border-blue-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'ðŸº')
                        ),
                        // Deal type buttons - desktop/tablet only (separate row)
                        React.createElement('div', { className: 'hidden md:flex gap-2 justify-center' },
                            React.createElement('button', {
                                onClick: () => { setDealType('all'); setDrinkFilter('all'); },
                                className: `px-6 py-2 rounded-lg text-base font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'all' 
                                        ? 'bg-gradient-to-br from-purple-500 via-purple-600 to-purple-800 text-white shadow-lg border-purple-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'All'),
                            React.createElement('button', {
                                onClick: () => { setDealType('Food'); setDrinkFilter('all'); },
                                className: `px-6 py-2 rounded-lg text-base font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'Food' 
                                        ? 'bg-gradient-to-br from-green-500 via-green-600 to-green-800 text-white shadow-lg border-green-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'ðŸ• Food'),
                            React.createElement('button', {
                                onClick: () => setDealType('Drink'),
                                className: `px-6 py-2 rounded-lg text-base font-medium transition-all backdrop-blur-md border ${
                                    dealType === 'Drink' 
                                        ? 'bg-gradient-to-br from-blue-500 via-blue-600 to-blue-800 text-white shadow-lg border-blue-400' 
                                        : 'bg-indigo-600/60 text-white border-indigo-400/40 hover:bg-indigo-500/60'
                                }`
                            }, 'ðŸº Drink')
                        )
                    )
                ),
                
                // Header - Image with overlay button
                React.createElement('div', { className: 'relative mb-8' },
                    // Header Image - Mobile
                    React.createElement('img', {
                        src: '/images/boulderhh.jpg',
                        alt: 'Boulder Happy Hours',
                        className: 'w-full h-64 object-cover rounded-lg shadow-xl md:hidden'
                    }),
                    // Header Image - Desktop
                    React.createElement('img', {
                        src: '/images/boulderhappyhour-1200x320.jpg',
                        alt: 'Boulder Happy Hours',
                        className: 'hidden md:block w-full h-80 object-cover rounded-lg shadow-xl'
                    }),
                    
                    // Results Count Pill Button - overlaid on lower third
                    React.createElement('div', { className: 'absolute bottom-6 left-0 right-0 flex justify-center' },
                        React.createElement('button', {
                            onClick: () => {
                                const dealsSection = document.getElementById('deals-section');
                                if (dealsSection) {
                                    const yOffset = -140; // Offset for sticky menu height + spacing
                                    const y = dealsSection.getBoundingClientRect().top + window.pageYOffset + yOffset;
                                    window.scrollTo({ top: y, behavior: 'smooth' });
                                }
                            },
                            className: 'px-6 py-3 bg-white/30 backdrop-blur-xl border border-white/40 rounded-full shadow-xl hover:shadow-2xl transition-all hover:scale-105 cursor-pointer hover:bg-white/40'
                        },
                            React.createElement('span', { className: 'text-white text-lg drop-shadow-lg' }, 'ðŸŽ‰ '),
                            React.createElement('span', { className: 'font-bold text-amber-400 text-lg drop-shadow-lg' }, sortedDisplayDeals.length),
                            React.createElement('span', { className: 'text-white text-lg drop-shadow-lg' }, ` deal${sortedDisplayDeals.length !== 1 ? 's' : ''} today!`)
                        )
                    )
                ),
                
                // Day Filter
                React.createElement('div', { className: 'mb-6' },
                    // Row 1: Sunday - Wednesday (mobile only, edge-to-edge)
                    React.createElement('div', { className: 'flex gap-1.5 mb-1.5 md:hidden' },
                        ...['Sunday', 'Monday', 'Tuesday', 'Wednesday'].map(day =>
                            React.createElement('button', {
                                key: day,
                                onClick: () => setSelectedDay(day),
                                className: `flex-1 px-2 py-1.5 rounded-lg text-sm font-medium transition-all backdrop-blur-md border ${
                                    selectedDay === day
                                        ? 'bg-white/80 text-slate-900 shadow-lg border-white/60 scale-105'
                                        : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                                }`
                            }, day)
                        )
                    ),
                    // Row 2: Thursday - Saturday + Late Night (mobile only, edge-to-edge)
                    React.createElement('div', { className: 'flex gap-1.5 md:hidden' },
                        ...['Thursday', 'Friday', 'Saturday'].map(day =>
                            React.createElement('button', {
                                key: day,
                                onClick: () => setSelectedDay(day),
                                className: `flex-1 px-2 py-1.5 rounded-lg text-sm font-medium transition-all backdrop-blur-md border ${
                                    selectedDay === day
                                        ? 'bg-white/80 text-slate-900 shadow-lg border-white/60 scale-105'
                                        : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                                }`
                            }, day)
                        ),
                        // Late Night button - auto width based on content
                        React.createElement('button', {
                            onClick: () => setLateNightOnly(!lateNightOnly),
                            className: `px-3 py-1.5 rounded-lg text-sm font-medium transition-all relative overflow-hidden whitespace-nowrap ${
                                lateNightOnly 
                                    ? 'bg-gradient-to-r from-indigo-900 to-purple-900 text-white shadow-lg scale-105' 
                                    : 'bg-gradient-to-r from-gray-800 to-gray-900 text-gray-300 hover:from-indigo-800 hover:to-purple-800 hover:text-white'
                            }`,
                            style: {
                                backgroundImage: lateNightOnly ? `
                                    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                    radial-gradient(circle at 30% 80%, rgba(255,255,255,0.55) 1px, transparent 1px),
                                    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                    radial-gradient(circle at 15% 50%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                    radial-gradient(circle at 45% 15%, rgba(255,255,255,0.5) 1px, transparent 1px),
                                    radial-gradient(circle at 70% 45%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                    linear-gradient(to right, rgb(49, 46, 129), rgb(88, 28, 135))
                                ` : `
                                    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.38) 1px, transparent 1px),
                                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                    radial-gradient(circle at 30% 80%, rgba(255,255,255,0.36) 1px, transparent 1px),
                                    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                    radial-gradient(circle at 15% 50%, rgba(255,255,255,0.4) 1px, transparent 1px),
                                    radial-gradient(circle at 45% 15%, rgba(255,255,255,0.35) 1px, transparent 1px),
                                    radial-gradient(circle at 70% 45%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                    linear-gradient(to right, rgb(31, 41, 55), rgb(17, 24, 39))
                                `,
                                backgroundSize: '100% 100%'
                            }
                        }, 'ðŸŒ› Late Night')
                    ),
                    // Desktop: All days + Late Night in one centered row
                    React.createElement('div', { className: 'hidden md:flex flex-wrap gap-2 justify-center' },
                        ...DAYS.map(day =>
                            React.createElement('button', {
                                key: day,
                                onClick: () => setSelectedDay(day),
                                className: `px-4 py-2 rounded-lg text-base font-medium transition-all backdrop-blur-md border ${
                                    selectedDay === day
                                        ? 'bg-white/80 text-slate-900 shadow-lg border-white/60 scale-105'
                                        : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                                }`
                            }, day)
                        ),
                        React.createElement('button', {
                            onClick: () => setLateNightOnly(!lateNightOnly),
                            className: `px-6 py-2 rounded-lg text-base font-medium transition-all relative overflow-hidden ${
                                lateNightOnly 
                                    ? 'bg-gradient-to-r from-indigo-900 to-purple-900 text-white shadow-lg scale-105' 
                                    : 'bg-gradient-to-r from-gray-800 to-gray-900 text-gray-300 hover:from-indigo-800 hover:to-purple-800 hover:text-white'
                            }`,
                            style: {
                                backgroundImage: lateNightOnly ? `
                                    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                    radial-gradient(circle at 30% 80%, rgba(255,255,255,0.55) 1px, transparent 1px),
                                    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                    radial-gradient(circle at 15% 50%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                    radial-gradient(circle at 45% 15%, rgba(255,255,255,0.5) 1px, transparent 1px),
                                    radial-gradient(circle at 70% 45%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                    linear-gradient(to right, rgb(49, 46, 129), rgb(88, 28, 135))
                                ` : `
                                    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.38) 1px, transparent 1px),
                                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                    radial-gradient(circle at 30% 80%, rgba(255,255,255,0.36) 1px, transparent 1px),
                                    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.45) 1px, transparent 1px),
                                    radial-gradient(circle at 15% 50%, rgba(255,255,255,0.4) 1px, transparent 1px),
                                    radial-gradient(circle at 45% 15%, rgba(255,255,255,0.35) 1px, transparent 1px),
                                    radial-gradient(circle at 70% 45%, rgba(255,255,255,0.42) 1px, transparent 1px),
                                    linear-gradient(to right, rgb(31, 41, 55), rgb(17, 24, 39))
                                `,
                                backgroundSize: '100% 100%'
                            }
                        }, 'ðŸŒ› Late Night')
                    )
                ),
                
                // Deal Type Toggle
                React.createElement('div', { className: 'mb-6' },
                    React.createElement('div', { className: 'flex gap-2 md:justify-center' },
                        React.createElement('button', {
                            onClick: () => { setDealType('all'); setDrinkFilter('all'); },
                            className: `w-20 md:w-auto md:flex-none px-6 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                dealType === 'all' 
                                    ? 'bg-gradient-to-br from-purple-500 via-purple-600 to-purple-800 text-white shadow-lg border-purple-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'All'),
                        React.createElement('button', {
                            onClick: () => { setDealType('Food'); setDrinkFilter('all'); },
                            className: `flex-1 md:flex-none md:w-auto px-6 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                dealType === 'Food' 
                                    ? 'bg-gradient-to-br from-green-500 via-green-600 to-green-800 text-white shadow-lg border-green-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸ• Food'),
                        React.createElement('button', {
                            onClick: () => setDealType('Drink'),
                            className: `flex-1 md:flex-none md:w-auto px-6 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                dealType === 'Drink' 
                                    ? 'bg-gradient-to-br from-blue-500 via-blue-600 to-blue-800 text-white shadow-lg border-blue-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸº Drink')
                    )
                ),
                dealType === 'Drink' && React.createElement('div', { className: 'mb-6' },
                    React.createElement('div', { className: 'flex flex-wrap gap-2 justify-center' },
                        React.createElement('button', {
                            onClick: () => setDrinkFilter('all'),
                            className: `px-4 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                drinkFilter === 'all' 
                                    ? 'bg-blue-600 text-white shadow-lg border-blue-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'All Drinks'),
                        React.createElement('button', {
                            onClick: () => setDrinkFilter('beer'),
                            className: `px-4 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                drinkFilter === 'beer' 
                                    ? 'bg-yellow-600 text-white shadow-lg border-yellow-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸº Beer'),
                        React.createElement('button', {
                            onClick: () => setDrinkFilter('wine'),
                            className: `px-4 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                drinkFilter === 'wine' 
                                    ? 'bg-red-600 text-white shadow-lg border-red-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸ· Wine'),
                        React.createElement('button', {
                            onClick: () => setDrinkFilter('cocktail'),
                            className: `px-4 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                drinkFilter === 'cocktail' 
                                    ? 'bg-pink-600 text-white shadow-lg border-pink-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸ¸ Cocktails'),
                        React.createElement('button', {
                            onClick: () => setDrinkFilter('margarita'),
                            className: `px-4 py-2 rounded-lg font-medium transition-all backdrop-blur-md border ${
                                drinkFilter === 'margarita' 
                                    ? 'bg-lime-600 text-white shadow-lg border-lime-400' 
                                    : 'bg-white/30 text-white border-white/20 hover:bg-white/40'
                            }`
                        }, 'ðŸ¹ Margaritas')
                    )
                ),
                
                // Deals Grid
                React.createElement('div', { id: 'deals-section' },
                sortedDisplayDeals.length === 0
                    ? React.createElement('div', { className: 'text-center py-12 bg-white rounded-lg shadow' },
                        React.createElement('p', { className: 'text-xl text-gray-500' }, 'No deals found for this selection'),
                        React.createElement('p', { className: 'text-gray-400 mt-2' }, 'Try selecting a different day or filter')
                    )
                    : React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' },
                        ...sortedDisplayDeals.map((venueGroup, index) => {
                            const isAllView = dealType === 'all';
                            const hasMultipleDeals = venueGroup.deals.length > 1;
                            
                            return React.createElement('div', {
                                key: index,
                                className: 'bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow overflow-hidden'
                            },
                                // Card Header
                                React.createElement('div', {
                                    className: `p-4 ${
                                        lateNightOnly
                                            ? 'bg-gradient-to-r from-indigo-900 to-purple-900'
                                            : isAllView
                                                ? 'bg-gradient-to-br from-purple-500 via-purple-600 to-purple-800'
                                                : venueGroup.deals[0].deal_type === 'Food'
                                                    ? 'bg-gradient-to-br from-green-500 via-green-600 to-green-800'
                                                    : // Drink cards - subtle horizontal gradient with more blue
                                                      dealType === 'Drink' && drinkFilter === 'beer'
                                                        ? 'bg-gradient-to-r from-blue-600 via-blue-500 to-yellow-400'
                                                        : dealType === 'Drink' && drinkFilter === 'wine'
                                                            ? 'bg-gradient-to-r from-blue-600 via-blue-500 to-red-400'
                                                            : dealType === 'Drink' && drinkFilter === 'cocktail'
                                                                ? 'bg-gradient-to-r from-blue-600 via-blue-500 to-pink-400'
                                                                : dealType === 'Drink' && drinkFilter === 'margarita'
                                                                    ? 'bg-gradient-to-r from-blue-600 via-blue-500 to-lime-400'
                                                                    : 'bg-gradient-to-br from-blue-500 via-blue-600 to-blue-800'
                                    }`,
                                    style: lateNightOnly ? {
                                        backgroundImage: `
                                            radial-gradient(circle at 20% 30%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                            radial-gradient(circle at 60% 70%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                            radial-gradient(circle at 80% 20%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                            radial-gradient(circle at 30% 80%, rgba(255,255,255,0.55) 1px, transparent 1px),
                                            radial-gradient(circle at 90% 60%, rgba(255,255,255,0.7) 1px, transparent 1px),
                                            radial-gradient(circle at 15% 50%, rgba(255,255,255,0.6) 1px, transparent 1px),
                                            radial-gradient(circle at 45% 15%, rgba(255,255,255,0.5) 1px, transparent 1px),
                                            radial-gradient(circle at 70% 45%, rgba(255,255,255,0.65) 1px, transparent 1px),
                                            linear-gradient(to right, rgb(49, 46, 129), rgb(88, 28, 135))
                                        `,
                                        backgroundSize: '100% 100%'
                                    } : {}
                                },
                                    React.createElement('h3', { className: 'text-xl font-bold text-white mb-1' }, 
                                        venueGroup.venue
                                    ),
                                    React.createElement('p', { className: 'text-purple-50 text-sm' }, 
                                        (() => {
                                            const deal = venueGroup.deals[0];
                                            let neighborhood = '';
                                            if (deal.nobo) neighborhood = 'NoBo';
                                            else if (deal.sobo) neighborhood = 'SoBo';
                                            else if (deal.dotobo) neighborhood = 'DoToBoCo';
                                            else if (deal.lesbo) neighborhood = 'LesBo';
                                            else if (deal.thehill) neighborhood = 'The Hill';
                                            else if (deal.ctpatown) neighborhood = 'CtPa Town';
                                            
                                            return `ðŸ“ ${venueGroup.city}${neighborhood ? ` â€¢ ðŸ¡ ${neighborhood}` : ''}`;
                                        })()
                                    )
                                ),
                                
                                // Card Body - Loop through all deals for this venue
                                React.createElement('div', { className: 'p-4' },
                                    ...venueGroup.deals.map((deal, dealIndex) =>
                                        React.createElement('div', {
                                            key: dealIndex,
                                            className: dealIndex > 0 ? 'mt-4 pt-4 border-t border-gray-200' : ''
                                        },
                                            // Deal Type Badge (small, subtle)
                                            React.createElement('div', { className: 'mb-2' },
                                                React.createElement('span', {
                                                    className: `inline-block px-2 py-1 rounded text-xs font-medium ${
                                                        deal.deal_type === 'Food'
                                                            ? 'bg-green-100 text-green-800'
                                                            : 'bg-blue-100 text-blue-800'
                                                    }`
                                                }, deal.deal_type === 'Food' ? 'ðŸ• Food' : 'ðŸº Drink')
                                            ),
                                            
                                            // Time - now in deal body
                                            React.createElement('p', { className: 'text-gray-600 text-sm font-medium mb-2' }, 
                                                `â° ${deal.time}`
                                            ),
                                            
                                            // Deal Description - PROMINENT
                                            React.createElement('p', { className: 'text-gray-700 text-base leading-relaxed mb-3 font-medium' }, deal.deal_description),
                                            
                                            // URL Link - if exists
                                            deal.url && React.createElement('a', {
                                                href: deal.url,
                                                target: '_blank',
                                                rel: 'noopener noreferrer',
                                                className: 'inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 font-medium mb-3 hover:underline'
                                            }, 
                                                'View Full Menu',
                                                React.createElement('span', null, 'â†’')
                                            ),
                                            
                                            // Tags - Taco Tuesday, Late Night and Drink Types
                                            React.createElement('div', { className: 'flex gap-2 flex-wrap' },
                                                // Taco Tuesday Tag - special orange/yellow gradient, shows first
                                                (deal.taco_tuesday && (deal.day === 'Tuesday' || selectedDay === 'Tuesday')) && React.createElement('span', { 
                                                    className: 'px-3 py-1 bg-gradient-to-r from-orange-400 to-yellow-400 text-orange-900 rounded-full text-sm font-bold shadow-md'
                                                }, 'ðŸŒ® Taco Tuesday!'),
                                                
                                                // Late Night Tag - same size as drink tags, lighter purple
                                                deal.latenight && React.createElement('span', { 
                                                    className: 'px-2 py-1 bg-gradient-to-r from-purple-100 to-indigo-200 text-purple-800 rounded text-xs font-medium'
                                                }, 'ðŸŒ› Late Night'),
                                                
                                                // Drink Tags (only show for Drink deals)
                                                deal.deal_type === 'Drink' && deal.beer && React.createElement('span', { className: 'px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium' }, 'ðŸº Beer'),
                                                deal.deal_type === 'Drink' && deal.wine && React.createElement('span', { className: 'px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium' }, 'ðŸ· Wine'),
                                                deal.deal_type === 'Drink' && deal.cocktail && React.createElement('span', { className: 'px-2 py-1 bg-pink-100 text-pink-800 rounded text-xs font-medium' }, 'ðŸ¸ Cocktail'),
                                                deal.deal_type === 'Drink' && deal.margarita && React.createElement('span', { className: 'px-2 py-1 bg-lime-100 text-lime-800 rounded text-xs font-medium' }, 'ðŸ¹ Margarita')
                                            )
                                        )
                                    )
                                )
                            );
                        })
                    )
                )
                ) // Close inner container div
            ); // Close outer wrapper div
        }
        
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>